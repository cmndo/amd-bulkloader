define(function(){function a(b){new d(b.assets);function c(f,j,i){var h=j;var g=f;var e=new Image();e.onload=function(){i(e,h)};e.src=f}function d(k){var g=[],h;var f=[];for(h=0;h<k.length;h++){f[h]=false}for(h=0;h<k.length;h++){new c(k[h],h,j)}var e=0;function j(l,i){f[i]=true;g[i]=l;e++;if(b.hasOwnProperty("onProgress")){b.onProgress({loaded:e,total:k.length,percentage:(e/k.length)*100,id:i,data:l})}for(h=0;h<f.length;h++){if(f[h]==false){return}}b.onComplete(g)}}}return a});